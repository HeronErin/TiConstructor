\doxysection{lib/interupts.c File Reference}
\hypertarget{interupts_8c}{}\label{interupts_8c}\index{lib/interupts.c@{lib/interupts.c}}


Set of tools for custom interupts.  


\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{interupts_8c_a080021f8b22b47e0e515fadb3342b6d8}\label{interupts_8c_a080021f8b22b47e0e515fadb3342b6d8} 
\#define {\bfseries \+\_\+\+\_\+hs}~\#
\begin{DoxyCompactList}\small\item\em Bypass rule against using \# in macros. \end{DoxyCompactList}\item 
\Hypertarget{interupts_8c_a09e68d8e9da5272f666f766a4915875f}\label{interupts_8c_a09e68d8e9da5272f666f766a4915875f} 
\#define {\bfseries INTRPT\+\_\+\+MASK}~0b00001011
\begin{DoxyCompactList}\small\item\em Used all interupts. \end{DoxyCompactList}\item 
\Hypertarget{interupts_8c_a1f71a76a10c4c9dde3696a69083045f0}\label{interupts_8c_a1f71a76a10c4c9dde3696a69083045f0} 
\#define {\bfseries basepage}~0x8584
\begin{DoxyCompactList}\small\item\em Apps require switching the current page, so we save the current page to this ram locations. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{interupts_8c_a0b5d2bf2b393ff71c20569a0d6ac9994}{SET\+\_\+\+INTERUPTS}}()
\begin{DoxyCompactList}\small\item\em Enables custom interupts. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{interupts_8c_a541352fa8faca369352a59691f4d7261}\label{interupts_8c_a541352fa8faca369352a59691f4d7261} 
void {\bfseries \+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+SET\+\_\+\+INTERUPTS} ()
\begin{DoxyCompactList}\small\item\em Called under the hood of \doxylink{interupts_8c_a0b5d2bf2b393ff71c20569a0d6ac9994}{SET\+\_\+\+INTERUPTS()} \end{DoxyCompactList}\item 
\Hypertarget{interupts_8c_a6186bb2f266a45dadb0c9e5cfcd4b6a2}\label{interupts_8c_a6186bb2f266a45dadb0c9e5cfcd4b6a2} 
void {\bfseries \+\_\+\+\_\+\+\_\+\+\_\+\+\_\+copied\+\_\+to\+\_\+position} () \+\_\+\+\_\+naked
\begin{DoxyCompactList}\small\item\em {\bfseries{Do not run this yourself.}} It is copied byte for byte into ram and is called from interupts. Interupts can not be ran from the flash, but only from ram, so we must copy it into ram. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Set of tools for custom interupts. 

Taken from \href{https://www.omnimaga.org/asm-language/interrupt-routine-not-returning/msg404756/\#msg404756}{\texttt{ https\+://www.\+omnimaga.\+org/asm-\/language/interrupt-\/routine-\/not-\/returning/msg404756/\#msg404756}} With interupts im not quite sure what im doing but this interupt system work

See \href{https://taricorp.gitlab.io/83pa28d/lesson/day23.html}{\texttt{ https\+://taricorp.\+gitlab.\+io/83pa28d/lesson/day23.\+html}} and \href{https://wikiti.brandonw.net/index.php?title=83Plus:Ports:03}{\texttt{ https\+://wikiti.\+brandonw.\+net/index.\+php?title=83\+Plus\+:\+Ports\+:03}} interupts "{}interupt"{} your code and run something else

They must run fast, I recomend you only run asm ( The absolute max is 54545 t-\/states, just remember an interupt is ran more then 100 times per secound and the z80 only has 1 core

Never run anything here except \doxylink{interupts_8c_a0b5d2bf2b393ff71c20569a0d6ac9994}{SET\+\_\+\+INTERUPTS()}, in this project assume if something starts with ten underscores, don\textquotesingle{}t try to run it

\doxysubsubsubsection*{Optional \#defines }


\begin{DoxyItemize}
\item {\bfseries{ ADDED\+\_\+\+ON\+\_\+\+EXIT()}} -\/ A function macro you can define that is run when interupts are disabled, used for greyscale
\end{DoxyItemize}

\doxysubsubsubsection*{Required \#defines }


\begin{DoxyItemize}
\item {\bfseries{ DURING\+\_\+\+INTERUPT()}} -\/ If you use interupts you {\bfseries{must}} define a function macro that is ran during interupts. And Ex {\ttfamily \#define DURING\+\_\+\+INTERUPT() do\+\_\+math()} 
\end{DoxyItemize}

\doxysubsection{Macro Definition Documentation}
\Hypertarget{interupts_8c_a0b5d2bf2b393ff71c20569a0d6ac9994}\label{interupts_8c_a0b5d2bf2b393ff71c20569a0d6ac9994} 
\index{interupts.c@{interupts.c}!SET\_INTERUPTS@{SET\_INTERUPTS}}
\index{SET\_INTERUPTS@{SET\_INTERUPTS}!interupts.c@{interupts.c}}
\doxysubsubsection{\texorpdfstring{SET\_INTERUPTS}{SET\_INTERUPTS}}
{\footnotesize\ttfamily \#define SET\+\_\+\+INTERUPTS(\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \_\_asm\(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ld\ de,\ \mbox{\hyperlink{interupts_8c_a080021f8b22b47e0e515fadb3342b6d8}{\_\_hs}}\ \ (ON\_EXIT-\/LoadInterrupt+0x8E2C)\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ push\ de\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \_\_endasm;\ \mbox{\hyperlink{interupts_8c_a541352fa8faca369352a59691f4d7261}{\_\_\_\_\_\_\_\_\_SET\_INTERUPTS}}();\ \_\_asm\(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ld\ \ ix,\mbox{\hyperlink{interupts_8c_a080021f8b22b47e0e515fadb3342b6d8}{\_\_hs}}\ 0\(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ add\ ix,sp\(\backslash\)}
\DoxyCodeLine{\ \ \ \ \_\_endasm;}

\end{DoxyCode}


Enables custom interupts. 

