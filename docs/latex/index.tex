\chapter{\# Ti\+Constructor}
\hypertarget{index}{}\label{index}\index{\# TiConstructor@{\# TiConstructor}}
\label{index_md_README}%
\Hypertarget{index_md_README}%


~~~~~~~~This is a remake of my \href{https://github.com/HeronErin/LibTi84}{\texttt{ Lib\+Ti84 project}} and aims to provide a means for the construction of games for the ti-\/84 (NON CE). This is more or less a culmination of all my knowledge in this niche field. I am not an expert. And this is a personal tool I use in my quest for a real-\/time 3d game for the ti-\/84. Everything should be capable of being built as an app or as a program (As long as you don\textquotesingle{}t use any non-\/constant global variables).

~~~~~~~~I do not plan to rely on any shells, although \href{https://www.ticalc.org/pub/83plus/flash/shells/}{\texttt{ Noshell}} is recommended for asm programs. This is made for linux, although you can use WSL if you must use windows.\hypertarget{index_autotoc_md0}{}\doxysection{\texorpdfstring{How to get started}{How to get started}}\label{index_autotoc_md0}
~~~~~~~~First, make sure you have the right project, this is for the ti-\/84 monochrome calculators, if your calculator has color you have come to the wrong place. Next, I recommend you use an emulator for development so you don\textquotesingle{}t brick your real device, I personally never run anything other than the end product on my physical calculator. You might want to use \href{https://www.cemetech.net/projects/jstified/}{\texttt{ js\+TIfied, an Online TI-\/83+/\+TI-\/84+ Graphing Calculator Emulator}} hosted on cemetech. But if you use an emulator you will need a rom (Read Only Memory dump of a calculator), the legal option is to dump your calculator\textquotesingle{}s rom using \href{https://www.cemetech.net/forum/viewtopic.php?t=9676&start=0}{\texttt{ rom 8x}}, although you can also download a rom from \href{https://archive.org/details/84-pbe-v-255}{\texttt{ archive.\+org}}. Next, you will need to follow the installation steps. If you have the helloworld successfully building and running in the emulator you are about done. At this point, if you don\textquotesingle{}t know what to do now, I recommend you learn how to program with the calculator from \href{https://taricorp.gitlab.io/83pa28d/index.html}{\texttt{ ti-\/84 in 28 days guide}}, I know you came here for C, but it provided essential info. Along with \href{https://gist.github.com/Konamiman/af5645b9998c802753023cf1be8a2970}{\texttt{ SDCC -\/ Interfacing with Z80 assembler code}}, whitch provides essential info on how to use inline asm and differences with sdcc\textquotesingle{}s z80 asm and what the guide uses. Also look in the src/ and look as what functions are avalible to use.

~~~~~~~~Ok, ok, I know that was a lot to digest, but if you did all that, you are now ready to make all sorts of cool shit. If you want to make fun 2d games you can do it all in c(sort of), if you want to make some 3d games, you might not have such luck. That is what this project\textquotesingle{}s goal is, to make a real-\/time 3d game, but that is quite hard with this calculator being an 8-\/bit device with half-\/baked 16-\/bit compatibility. But as of now, a world of possibilities is opened.\hypertarget{index_autotoc_md1}{}\doxysection{\texorpdfstring{How to install}{How to install}}\label{index_autotoc_md1}

\begin{DoxyEnumerate}
\item First im going to assume you are using linux, or at least set up \href{https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-10\#1-overview}{\texttt{ WSL.}} Although if you don\textquotesingle{}t want to install anything you can try out github codespaces and skip the clone step, but everytime you build you need to download file.
\item Clone this repo with\+: {\ttfamily git clone \href{https://github.com/HeronErin/TiConstructor.git}{\texttt{ https\+://github.\+com/\+Heron\+Erin/\+Ti\+Constructor.\+git}}}
\item Install SDCC version 4.\+1
\begin{DoxyItemize}
\item Download SDCC version 4.\+1 from \href{https://sourceforge.net/projects/sdcc/files/sdcc-linux-amd64/4.1.0/sdcc-4.1.0-amd64-unknown-linux2.5.tar.bz2/download?use_mirror=master&download=&failedmirror=cfhcable.dl.sourceforge.net}{\texttt{ This Url}}
\begin{DoxyItemize}
\item OR wget/curl \href{https://master.dl.sourceforge.net/project/sdcc/sdcc-linux-amd64/4.1.0/sdcc-4.1.0-amd64-unknown-linux2.5.tar.bz2?viasf=1}{\texttt{ https\+://master.\+dl.\+sourceforge.\+net/project/sdcc/sdcc-\/linux-\/amd64/4.\+1.\+0/sdcc-\/4.\+1.\+0-\/amd64-\/unknown-\/linux2.\+5.\+tar.\+bz2?viasf=1}}
\end{DoxyItemize}
\item Extract and install with {\ttfamily tar -\/xvjf sdcc-\/4.\+1.\+0-\/\texorpdfstring{$\ast$}{*} \&\& sudo cp sdcc/bin/\texorpdfstring{$\ast$}{*} /usr/bin/ \&\& sudo cp -\/r sdcc/share/\texorpdfstring{$\ast$}{*} /usr/share/}
\item Remove the sdcc folder as it is nolonger needed {\ttfamily rm -\/rf sdcc}
\end{DoxyItemize}
\item If you are using Ubuntu you need to use the rabbitsign ubuntu versing {\ttfamily rm other\+\_\+files/rabbitsign \&\& mv other\+\_\+files/rabbitsign\+\_\+ubuntu\+\_\+build other\+\_\+files/rabbitsign \&\& chmod +x other\+\_\+files/rabbitsign}
\item Test it out
\end{DoxyEnumerate}


\begin{DoxyCode}{0}
\DoxyCodeLine{bash\ build\_prog.sh\ examples/helloworld/\ helloWorld}

\end{DoxyCode}
 or


\begin{DoxyCode}{0}
\DoxyCodeLine{bash\ build\_app.sh\ examples/helloworld/\ helloWorld}

\end{DoxyCode}


Now that you have a working build system, install tilp (or TI Connect for windows) and send the file to your calc.\hypertarget{index_autotoc_md2}{}\doxysection{\texorpdfstring{How this works}{How this works}}\label{index_autotoc_md2}
~~~~~~~~This is not something that was simple to figure out, there is no unified guide to the ti84/ti83+. But here is my explanation of what this toolkit does. SDCC compiles c code to z80 assembly and {\itshape assembles} it into a binary file. Then if you are making a program binpac8x.\+py will pack it into a program file (.8xp). If you are making an app a buildid is generated for you, my script generates a custom header for you, and rabbitsign will sign it with the freeware key and converts it to an app file (.8xk). But thanks to the work of me and the giants whose shoulders I stand on, that is all abstracted away from you with a single line build command.

~~~~~~~~For you, the developer, I gave you a few files in the lib/ forlder, these are some useful tools for what ever you are making. Since you are often trying to keep build sizes down, many functions require you to enable them with {\ttfamily \#define USE\+\_\+\+FUNCTION\+\_\+\+NAME} after you {\ttfamily \#include} the source file. I recommend you look at the source code of the library itself for the exact \#includes you need to use.

{\itshape Ps. Don\textquotesingle{}t remove the .buildid files, you need to keep the same .buildid everytime you update an app on your calculator}\hypertarget{index_autotoc_md3}{}\doxysection{\texorpdfstring{Some useful resources}{Some useful resources}}\label{index_autotoc_md3}

\begin{DoxyItemize}
\item \href{https://taricorp.gitlab.io/83pa28d/index.html}{\texttt{ Best guide to z80 asm}}
\item \href{http://jgmalcolm.com/z80/intermediate/romc}{\texttt{ Some useful bcalls}}
\item \href{https://clrhome.org/table/}{\texttt{ Useful table for t-\/state timing}}
\item \href{https://wikiti.brandonw.net/index.php?title=Calculator_Documentation}{\texttt{ wikiti for almost all bcalls and ram addresses}}
\item \href{https://www.cemetech.net/tools/ti84p}{\texttt{ Hub of ti dev community}}
\item \href{https://www.cemetech.net/projects/uti/}{\texttt{ Old United-\/\+TI for useful routines not on cemetech}}
\item \href{https://www.omnimaga.org/asm-language/}{\texttt{ Omnimaga has a shit ton of usefull stuff a with I knew about sooner}}
\item \href{https://www.overtakenbyevents.com/tstates/}{\texttt{ T-\/state counter}} for those making high speed games and a \href{https://pastebin.com/u0hVtBwk}{\texttt{ tampermonkey script}} that makes it better by adding up the t-\/states
\item \href{https://www.omnimaga.org/asm-language/perfect-grayscale-tutorial/}{\texttt{ Greyscale I wish I might one day be smart enough to implement}}
\end{DoxyItemize}\hypertarget{index_autotoc_md4}{}\doxysection{\texorpdfstring{Random fun facts}{Random fun facts}}\label{index_autotoc_md4}

\begin{DoxyEnumerate}
\item When you build an app, a .buildid file is generated with a unique(ish) id for your app. This is what allows you to update it on the calculator because can\textquotesingle{}t replace an app on your calculator with an app with the same name but a different build id, and the calculator refuses to allow 2 apps to exist with the same build id, so {\bfseries{don\textquotesingle{}t delete your .buildid or you will be forced to get a new name}} \texorpdfstring{$>$}{>}\+:\{
\item Since apps require you to bcall JForce\+Cmd\+No\+Char before you exit, I came up with an interesting trick to do this for you, since I didn\textquotesingle{}t want a mandatory bcall. If you push a value to the stack without popping it, the ret keyword will jump to that memory address, this is how functions work, so before your app runs, I simply push the address of my code that runs the required bcall, making this run after your main function returns.
\end{DoxyEnumerate}\hypertarget{index_autotoc_md5}{}\doxysection{\texorpdfstring{Credits}{Credits}}\label{index_autotoc_md5}
I did take some code from others, I just can\textquotesingle{}t do it all myself.


\begin{DoxyItemize}
\item Thanks {\itshape Xeda112358} for the \href{https://www.cemetech.net/forum/viewtopic.php?t=1449&postdays=0&postorder=asc&start=126}{\texttt{ routine for converting registers to op values}}
\item Thanks to whoever wrote the TI-\/83 Plus calculator in 28 days guide for the \href{https://taricorp.gitlab.io/83pa28d/lesson/day10.html\#cb11}{\texttt{ fast clear buffer routine}}
\item Thanks {\itshape James Montelongo Jr}, who wrote the fast \href{https://www.ticalc.org/pub/83plus/asm/source/routines/dline.zip}{\texttt{ dline routine}}
\item Thanks to the {\itshape geeksforgeeks} authors for the \href{https://www.geeksforgeeks.org/bresenhams-circle-drawing-algorithm/}{\texttt{ circle function}}
\item Thanks to {\itshape Sorunome} for the \href{https://www.omnimaga.org/asm-language/interrupt-routine-not-returning/msg404756/\#msg404756}{\texttt{ flash app interupt loader}} 
\end{DoxyItemize}